<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Word Wonders</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1a1a1a;
            color: white;
            height: 100vh;
            overflow: hidden;
            touch-action: manipulation;
        }

        /* –°–ò–°–¢–ï–ú–ê –≠–ö–†–ê–ù–û–í */
        .screen {
            display: none;
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            flex-direction: column;
            padding: 10px;
        }

        .screen.active {
            display: flex;
        }

        /* –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù */
        #mainScreen {
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .logo h1 {
            font-size: 24px;
            margin-bottom: 5px;
            color: #4a90e2;
        }

        .logo p {
            font-size: 14px;
            color: #888;
        }

        /* –ö–ù–û–ü–ö–ê –ò–ì–†–´ */
        .start-btn {
            padding: 15px 30px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #4a90e2;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
        }

        /* –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù */
        #gameScreen {
            gap: 10px;
        }

        /* –•–ï–î–ï–† –ò–ì–†–´ */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 8px;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            background: #333;
            border: none;
            color: white;
            border-radius: 8px;
            cursor: pointer;
        }

        .game-stats {
            display: flex;
            gap: 15px;
        }

        .stat-display {
            background: #333;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 14px;
        }

        /* –û–ë–õ–ê–°–¢–¨ –°–õ–û–í */
        .words-area {
            flex: 1;
            background: #2a2a2a;
            border-radius: 8px;
            padding: 10px;
            overflow-y: auto;
            margin-bottom: 10px;
        }

        .words-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .word-row {
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        .word-cell {
            display: flex;
            gap: 2px;
            padding: 5px;
            background: #333;
            border-radius: 6px;
        }

        .letter-cell {
            width: 25px;
            height: 25px;
            background: #444;
            border: 1px solid #555;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #888;
        }

        .letter-cell.revealed {
            background: #2c5282;
            color: white;
        }

        .word-info {
            text-align: center;
            font-size: 12px;
            color: #888;
            margin-top: 10px;
        }

        /* –û–ë–õ–ê–°–¢–¨ –í–í–û–î–ê */
        .input-area {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .current-input {
            display: flex;
            justify-content: center;
            gap: 5px;
            min-height: 40px;
            flex-wrap: wrap;
        }

        .input-letter {
            width: 35px;
            height: 35px;
            background: #2c5282;
            border: 2px solid #4a90e2;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
        }

        /* –ö–†–£–ì –ë–£–ö–í */
        .circle-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 0 auto;
        }

        .circle-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: #4a90e2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            font-size: 20px;
        }

        .circle-letter {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #444;
            border: 2px solid #555;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            cursor: pointer;
        }

        /* –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø */
        .input-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .control-btn {
            width: 45px;
            height: 45px;
            border-radius: 8px;
            border: none;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .clear-btn {
            background: #c53030;
            color: white;
        }

        .reset-btn {
            background: #d69e2e;
            color: white;
        }

        /* –≠–ö–†–ê–ù –†–ï–ó–£–õ–¨–¢–ê–¢–û–í */
        #resultScreen {
            justify-content: center;
            align-items: center;
        }

        .result-content {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            width: 90%;
            max-width: 300px;
            text-align: center;
        }

        .result-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: #4a90e2;
        }

        .result-stats {
            margin: 20px 0;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #333;
        }

        .result-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .action-btn {
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }

        .next-btn {
            background: #4a90e2;
            color: white;
        }

        .menu-btn {
            background: #444;
            color: white;
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 360px) {
            .circle-container {
                width: 220px;
                height: 220px;
            }
            
            .circle-letter {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
        }

        @media (min-height: 700px) {
            .words-area {
                height: 180px;
            }
        }
    </style>
</head>
<body>
    <!-- –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù -->
    <div id="mainScreen" class="screen active">
        <div class="logo">
            <h1>WORD WONDERS</h1>
            <p>–°–æ–±–∏—Ä–∞–π —Å–ª–æ–≤–∞ –∏–∑ –±—É–∫–≤</p>
        </div>
        
        <button id="startGameBtn" class="start-btn">
            –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
        </button>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="mainLevel">1</div>
                <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-value" id="mainScore">0</div>
                <div class="stat-label">–û—á–∫–∏</div>
            </div>
        </div>
    </div>
    
    <!-- –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù -->
    <div id="gameScreen" class="screen">
        <div class="game-header">
            <button id="backBtn" class="back-btn">
                <i class="fas fa-arrow-left"></i>
            </button>
            
            <div class="game-stats">
                <div class="stat-display">
                    –£—Ä–æ–≤–µ–Ω—å: <span id="currentLevel">1</span>
                </div>
                <div class="stat-display">
                    –û—á–∫–∏: <span id="score">0</span>
                </div>
            </div>
        </div>
        
        <!-- –û–ë–õ–ê–°–¢–¨ –°–õ–û–í -->
        <div class="words-area">
            <div class="words-grid" id="wordsGrid">
                <!-- –°–ª–æ–≤–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
            <div class="word-info" id="wordInfo">
                –ù–∞–π–¥–∏ –≤—Å–µ —Å–ª–æ–≤–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—É–∫–≤
            </div>
        </div>
        
        <!-- –û–ë–õ–ê–°–¢–¨ –í–í–û–î–ê -->
        <div class="input-area">
            <div id="currentInput" class="current-input">
                <!-- –ù–∞–±—Ä–∞–Ω–Ω—ã–µ –±—É–∫–≤—ã -->
            </div>
            
            <!-- –ö–†–£–ì –° –ë–£–ö–í–ê–ú–ò -->
            <div class="circle-container" id="circleInput">
                <!-- –ë—É–∫–≤—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <!-- –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
            <div class="input-controls">
                <button id="clearBtn" class="control-btn clear-btn" title="–û—á–∏—Å—Ç–∏—Ç—å">
                    <i class="fas fa-backspace"></i>
                </button>
                <button id="resetBtn" class="control-btn reset-btn" title="–°–±—Ä–æ—Å–∏—Ç—å">
                    <i class="fas fa-undo"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- –≠–ö–†–ê–ù –†–ï–ó–£–õ–¨–¢–ê–¢–û–í -->
    <div id="resultScreen" class="screen">
        <div class="result-content">
            <div class="result-title" id="resultTitle">–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</div>
            
            <div class="result-stats">
                <div class="stat-row">
                    <span>–ù–∞–π–¥–µ–Ω–æ —Å–ª–æ–≤:</span>
                    <span id="resultFound">0/0</span>
                </div>
                <div class="stat-row">
                    <span>–û—á–∫–∏ –∑–∞ —É—Ä–æ–≤–µ–Ω—å:</span>
                    <span id="resultScore">0</span>
                </div>
                <div class="stat-row">
                    <span>–í—Å–µ–≥–æ –æ—á–∫–æ–≤:</span>
                    <span id="resultTotalScore">0</span>
                </div>
            </div>
            
            <div class="result-buttons">
                <button id="nextLevelBtn" class="action-btn next-btn">
                    –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
                </button>
                <button id="backToMenuBtn" class="action-btn menu-btn">
                    –í –º–µ–Ω—é
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==============================================
        // –û–°–ù–û–í–ù–û–ô –ö–õ–ê–°–° –ò–ì–†–´
        // ==============================================
        class Game {
            constructor() {
                // –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´
                this.state = {
                    level: 1,
                    score: 0,
                    currentInput: [],
                    foundWords: [],
                    levelData: null
                };
                
                // –°–ü–ò–°–û–ö –°–õ–û–í –î–õ–Ø –ò–ì–†–´
                this.wordList = [
                    '–ö–û–¢', '–î–û–ú', '–ú–ê–ö', '–†–û–¢', '–õ–ï–°', '–°–û–ù', '–ù–û–°', '–†–ê–ö',
                    '–ú–û–†–ï', '–†–ï–ö–ê', '–ü–û–õ–ï', '–ì–û–†–ê', '–†–£–ö–ê', '–ù–û–ì–ê',
                    '–°–¢–û–õ', '–°–¢–£–õ', '–î–í–ï–†–¨', '–û–ö–ù–û', '–ö–ù–ò–ì–ê', '–†–£–ß–ö–ê'
                ];
                
                // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
                this.init();
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
            init() {
                console.log('üéÆ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...');
                
                // –ó–ê–ì–†–£–ó–ö–ê –°–û–•–†–ê–ù–ï–ù–ò–ô
                this.loadGame();
                
                // –ù–ê–°–¢–†–û–ô–ö–ê –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –°–û–ë–´–¢–ò–ô
                this.setupEventListeners();
                
                // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ì–õ–ê–í–ù–û–ì–û –≠–ö–†–ê–ù–ê
                this.updateMainScreen();
                
                console.log('‚úÖ –ò–≥—Ä–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
            }
            
            // –ó–ê–ì–†–£–ó–ö–ê –°–û–•–†–ê–ù–ï–ù–ù–û–ô –ò–ì–†–´
            loadGame() {
                const saved = localStorage.getItem('wordWondersSave');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.state.level = data.level || 1;
                        this.state.score = data.score || 0;
                        console.log('üìÇ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
                    } catch (e) {
                        console.log('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
                    }
                }
            }
            
            // –°–û–•–†–ê–ù–ï–ù–ò–ï –ò–ì–†–´
            saveGame() {
                const saveData = {
                    level: this.state.level,
                    score: this.state.score
                };
                localStorage.setItem('wordWondersSave', JSON.stringify(saveData));
            }
            
            // –ù–ê–°–¢–†–û–ô–ö–ê –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –°–û–ë–´–¢–ò–ô
            setupEventListeners() {
                // –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù
                document.getElementById('startGameBtn').addEventListener('click', () => {
                    this.startGame();
                });
                
                // –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù
                document.getElementById('backBtn').addEventListener('click', () => {
                    this.showScreen('mainScreen');
                    this.updateMainScreen();
                });
                
                document.getElementById('clearBtn').addEventListener('click', () => {
                    this.clearInput();
                });
                
                document.getElementById('resetBtn').addEventListener('click', () => {
                    this.resetInput();
                });
                
                // –≠–ö–†–ê–ù –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
                document.getElementById('nextLevelBtn').addEventListener('click', () => {
                    this.nextLevel();
                });
                
                document.getElementById('backToMenuBtn').addEventListener('click', () => {
                    this.showScreen('mainScreen');
                    this.updateMainScreen();
                });
                
                // –û–ë–†–ê–ë–û–¢–ö–ê –ö–õ–ê–í–ò–ê–¢–£–†–´
                document.addEventListener('keydown', (e) => {
                    if (this.getCurrentScreen() === 'gameScreen') {
                        if (e.key === 'Backspace') {
                            this.removeLastLetter();
                        } else if (e.key === 'Enter') {
                            this.submitWord();
                        } else if (e.key.length === 1 && /[–∞-—è–ê-–Øa-zA-Z]/.test(e.key)) {
                            this.addLetter(e.key.toUpperCase());
                        }
                    }
                });
            }
            
            // –ü–û–õ–£–ß–ï–ù–ò–ï –¢–ï–ö–£–©–ï–ì–û –≠–ö–†–ê–ù–ê
            getCurrentScreen() {
                const screens = document.querySelectorAll('.screen');
                for (const screen of screens) {
                    if (screen.classList.contains('active')) {
                        return screen.id;
                    }
                }
                return null;
            }
            
            // –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –≠–ö–†–ê–ù–û–í
            showScreen(screenId) {
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
            }
            
            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ì–õ–ê–í–ù–û–ì–û –≠–ö–†–ê–ù–ê
            updateMainScreen() {
                document.getElementById('mainLevel').textContent = this.state.level;
                document.getElementById('mainScore').textContent = this.state.score;
            }
            
            // –ó–ê–ü–£–°–ö –ò–ì–†–´
            startGame() {
                console.log('üéØ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã...');
                
                // –°–ë–†–û–° –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø –ù–û–í–û–ì–û –£–†–û–í–ù–Ø
                this.state.currentInput = [];
                this.state.foundWords = [];
                
                // –ì–ï–ù–ï–†–ê–¶–ò–Ø –£–†–û–í–ù–Ø
                this.generateLevel();
                
                // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ì–†–û–í–û–ì–û –≠–ö–†–ê–ù–ê
                this.updateGameScreen();
                
                // –ü–ï–†–ï–•–û–î –ù–ê –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù
                this.showScreen('gameScreen');
            }
            
            // –ì–ï–ù–ï–†–ê–¶–ò–Ø –£–†–û–í–ù–Ø
            generateLevel() {
                console.log('üé≤ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è', this.state.level);
                
                // –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ö–û–õ–ò–ß–ï–°–¢–í–ê –°–õ–û–í
                const wordCount = Math.min(3 + Math.floor(this.state.level / 2), 5);
                
                // –í–´–ë–û–† –°–õ–£–ß–ê–ô–ù–´–• –°–õ–û–í
                let selectedWords = [];
                let availableWords = [...this.wordList];
                
                for (let i = 0; i < wordCount; i++) {
                    if (availableWords.length === 0) break;
                    
                    const randomIndex = Math.floor(Math.random() * availableWords.length);
                    const word = availableWords[randomIndex];
                    selectedWords.push(word);
                    availableWords.splice(randomIndex, 1);
                }
                
                // –°–û–ë–ò–†–ê–ï–ú –í–°–ï –ë–£–ö–í–´ –ò–ó –í–´–ë–†–ê–ù–ù–´–• –°–õ–û–í
                let allLetters = [];
                selectedWords.forEach(word => {
                    allLetters.push(...word.split(''));
                });
                
                // –í–´–ë–ò–†–ê–ï–ú –£–ù–ò–ö–ê–õ–¨–ù–´–ï –ë–£–ö–í–´ –î–õ–Ø –ö–†–£–ì–ê
                const uniqueLetters = [...new Set(allLetters)];
                let availableLetters = uniqueLetters;
                
                // –ï–°–õ–ò –ë–£–ö–í –ú–ê–õ–û, –î–û–ë–ê–í–õ–Ø–ï–ú –°–õ–£–ß–ê–ô–ù–´–ï
                if (availableLetters.length < 6) {
                    const alphabet = '–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø';
                    while (availableLetters.length < 8) {
                        const randomLetter = alphabet[Math.floor(Math.random() * alphabet.length)];
                        if (!availableLetters.includes(randomLetter)) {
                            availableLetters.push(randomLetter);
                        }
                    }
                }
                
                // –û–ì–†–ê–ù–ò–ß–ò–í–ê–ï–ú –î–û 10 –ë–£–ö–í
                availableLetters = availableLetters.slice(0, 10);
                
                // –ü–ï–†–ï–ú–ï–®–ò–í–ê–ï–ú –ë–£–ö–í–´
                for (let i = availableLetters.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [availableLetters[i], availableLetters[j]] = [availableLetters[j], availableLetters[i]];
                }
                
                // –°–û–ó–î–ê–ï–ú –°–¢–†–£–ö–¢–£–†–£ –î–õ–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –°–õ–û–í
                const wordCells = {};
                selectedWords.forEach(word => {
                    wordCells[word] = word.split('').map((letter, index) => ({
                        revealed: false,
                        letter: letter,
                        index: index
                    }));
                });
                
                // –°–û–•–†–ê–ù–Ø–ï–ú –î–ê–ù–ù–´–ï –£–†–û–í–ù–Ø
                this.state.levelData = {
                    availableLetters: availableLetters,
                    targetWords: selectedWords,
                    wordCells: wordCells,
                    allLetters: allLetters
                };
                
                console.log('‚úÖ –£—Ä–æ–≤–µ–Ω—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω:', selectedWords);
            }
            
            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ì–†–û–í–û–ì–û –≠–ö–†–ê–ù–ê
            updateGameScreen() {
                // –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–ê–¢–ò–°–¢–ò–ö–ò
                document.getElementById('currentLevel').textContent = this.state.level;
                document.getElementById('score').textContent = this.state.score;
                
                // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –°–ï–¢–ö–ò –°–õ–û–í
                this.renderWordsGrid();
                
                // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –¢–ï–ö–£–©–ï–ì–û –í–í–û–î–ê
                this.renderCurrentInput();
                
                // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ö–†–£–ì–ê –° –ë–£–ö–í–ê–ú–ò
                this.renderCircleInput();
                
                // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–§–û–†–ú–ê–¶–ò–ò
                const foundCount = this.state.foundWords.length;
                const totalWords = this.state.levelData.targetWords.length;
                document.getElementById('wordInfo').textContent = 
                    `–ù–∞–π–¥–µ–Ω–æ —Å–ª–æ–≤: ${foundCount}/${totalWords}`;
            }
            
            // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –°–ï–¢–ö–ò –°–õ–û–í
            renderWordsGrid() {
                const container = document.getElementById('wordsGrid');
                container.innerHTML = '';
                
                this.state.levelData.targetWords.forEach(word => {
                    const wordRow = document.createElement('div');
                    wordRow.className = 'word-row';
                    
                    const isFound = this.state.foundWords.includes(word);
                    
                    this.state.levelData.wordCells[word].forEach((cell, index) => {
                        const cellElement = document.createElement('div');
                        cellElement.className = 'letter-cell';
                        
                        if (isFound || cell.revealed) {
                            cellElement.textContent = cell.letter;
                            cellElement.classList.add('revealed');
                        }
                        
                        wordRow.appendChild(cellElement);
                    });
                    
                    container.appendChild(wordRow);
                });
            }
            
            // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –¢–ï–ö–£–©–ï–ì–û –í–í–û–î–ê
            renderCurrentInput() {
                const container = document.getElementById('currentInput');
                container.innerHTML = '';
                
                this.state.currentInput.forEach(letter => {
                    const div = document.createElement('div');
                    div.className = 'input-letter';
                    div.textContent = letter;
                    container.appendChild(div);
                });
            }
            
            // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ö–†–£–ì–ê –° –ë–£–ö–í–ê–ú–ò
            renderCircleInput() {
                const container = document.getElementById('circleInput');
                container.innerHTML = '';
                
                // –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –ö–ù–û–ü–ö–ê –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø
                const center = document.createElement('div');
                center.className = 'circle-center';
                center.innerHTML = '<i class="fas fa-check"></i>';
                center.onclick = () => this.submitWord();
                container.appendChild(center);
                
                // –ë–£–ö–í–´ –ü–û –ö–†–£–ì–£
                const letters = this.state.levelData.availableLetters;
                const radius = 85;
                const centerX = 125;
                const centerY = 125;
                
                letters.forEach((letter, index) => {
                    const angle = (index / letters.length) * 2 * Math.PI;
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    
                    const btn = document.createElement('div');
                    btn.className = 'circle-letter';
                    btn.textContent = letter;
                    btn.style.left = `${x - 20}px`;
                    btn.style.top = `${y - 20}px`;
                    btn.onclick = () => this.addLetter(letter);
                    
                    container.appendChild(btn);
                });
            }
            
            // –î–û–ë–ê–í–õ–ï–ù–ò–ï –ë–£–ö–í–´
            addLetter(letter) {
                // –ü–†–û–í–ï–†–ö–ê –î–û–°–¢–£–ü–ù–û–°–¢–ò –ë–£–ö–í–´
                const usedCount = this.state.currentInput.filter(l => l === letter).length;
                const availableCount = this.state.levelData.allLetters.filter(l => l === letter).length;
                
                if (usedCount < availableCount) {
                    this.state.currentInput.push(letter);
                    this.updateGameScreen();
                }
            }
            
            // –£–î–ê–õ–ï–ù–ò–ï –ü–û–°–õ–ï–î–ù–ï–ô –ë–£–ö–í–´
            removeLastLetter() {
                if (this.state.currentInput.length > 0) {
                    this.state.currentInput.pop();
                    this.updateGameScreen();
                }
            }
            
            // –û–ß–ò–°–¢–ö–ê –í–í–û–î–ê
            clearInput() {
                this.state.currentInput = [];
                this.updateGameScreen();
            }
            
            // –°–ë–†–û–° –ù–ê–ë–†–ê–ù–ù–´–• –ë–£–ö–í
            resetInput() {
                this.clearInput();
            }
            
            // –ü–†–û–í–ï–†–ö–ê –°–õ–û–í–ê
            submitWord() {
                const word = this.state.currentInput.join('').toUpperCase();
                
                if (word.length < 2) {
                    return;
                }
                
                // –ü–†–û–í–ï–†–ö–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –ë–£–ö–í
                const letterCounts = {};
                this.state.currentInput.forEach(letter => {
                    letterCounts[letter] = (letterCounts[letter] || 0) + 1;
                });
                
                const availableCounts = {};
                this.state.levelData.allLetters.forEach(letter => {
                    availableCounts[letter] = (availableCounts[letter] || 0) + 1;
                });
                
                let isValid = true;
                for (const letter in letterCounts) {
                    if (!availableCounts[letter] || availableCounts[letter] < letterCounts[letter]) {
                        isValid = false;
                        break;
                    }
                }
                
                if (!isValid) {
                    this.clearInput();
                    return;
                }
                
                // –ü–†–û–í–ï–†–ö–ê –°–õ–û–í–ê
                if (this.state.levelData.targetWords.includes(word)) {
                    if (!this.state.foundWords.includes(word)) {
                        // –î–û–ë–ê–í–õ–Ø–ï–ú –°–õ–û–í–û –í –ù–ê–ô–î–ï–ù–ù–´–ï
                        this.state.foundWords.push(word);
                        
                        // –ù–ê–ß–ò–°–õ–Ø–ï–ú –û–ß–ö–ò
                        const points = word.length * 10;
                        this.state.score += points;
                        
                        // –ü–†–û–í–ï–†–Ø–ï–ú –ó–ê–í–ï–†–®–ï–ù–ò–ï –£–†–û–í–ù–Ø
                        this.checkLevelCompletion();
                        
                    } else {
                        // –°–õ–û–í–û –£–ñ–ï –ù–ê–ô–î–ï–ù–û
                    }
                } else {
                    // –°–õ–û–í–ê –ù–ï–¢ –í –£–†–û–í–ù–ï
                }
                
                // –û–ß–ò–©–ê–ï–ú –í–í–û–î –ò –°–û–•–†–ê–ù–Ø–ï–ú
                this.clearInput();
                this.saveGame();
            }
            
            // –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ò–Ø –£–†–û–í–ù–Ø
            checkLevelCompletion() {
                const allFound = this.state.levelData.targetWords.every(word => 
                    this.state.foundWords.includes(word)
                );
                
                if (allFound) {
                    setTimeout(() => {
                        this.showLevelComplete();
                    }, 500);
                }
            }
            
            // –ü–û–ö–ê–ó–ê–¢–¨ –≠–ö–†–ê–ù –ü–û–ë–ï–î–´
            showLevelComplete() {
                // –†–ê–°–ß–ï–¢ –û–ß–ö–û–í –ó–ê –£–†–û–í–ï–ù–¨
                let levelScore = 0;
                this.state.foundWords.forEach(word => {
                    levelScore += word.length * 10;
                });
                
                // –ó–ê–ü–û–õ–ù–ï–ù–ò–ï –°–¢–ê–¢–ò–°–¢–ò–ö–ò
                document.getElementById('resultFound').textContent = 
                    `${this.state.foundWords.length}/${this.state.levelData.targetWords.length}`;
                document.getElementById('resultScore').textContent = levelScore;
                document.getElementById('resultTotalScore').textContent = this.state.score;
                
                // –ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–ì–û–õ–û–í–ö–ê
                document.getElementById('resultTitle').textContent = '–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!';
                
                // –ü–û–ö–ê–ó –≠–ö–†–ê–ù–ê
                this.showScreen('resultScreen');
            }
            
            // –ü–ï–†–ï–•–û–î –ù–ê –°–õ–ï–î–£–Æ–©–ò–ô –£–†–û–í–ï–ù–¨
            nextLevel() {
                // –ü–û–í–´–®–ê–ï–ú –£–†–û–í–ï–ù–¨
                this.state.level++;
                
                // –°–û–•–†–ê–ù–Ø–ï–ú –ò–ì–†–£
                this.saveGame();
                
                // –ó–ê–ü–£–°–ö–ê–ï–ú –ù–û–í–´–ô –£–†–û–í–ï–ù–¨
                this.startGame();
            }
        }
        
        // ==============================================
        // –ó–ê–ü–£–°–ö –ò–ì–†–´ –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´
        // ==============================================
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...');
            window.game = new Game();
            console.log('‚úÖ –ò–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞!');
        });
    </script>
</body>
</html>
