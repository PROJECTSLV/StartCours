<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Word Wonders</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –°–±—Ä–æ—Å –∏ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #f8fafc;
            height: 100vh;
            overflow: hidden;
            touch-action: manipulation;
        }

        .screen {
            display: none;
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            flex-direction: column;
        }

        .screen.active {
            display: flex;
        }

        /* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω */
        #mainScreen {
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 16px;
        }

        .logo {
            text-align: center;
            margin-bottom: 8px;
        }

        .logo h1 {
            font-size: 1.7rem;
            font-weight: 800;
            background: linear-gradient(45deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 4px;
        }

        .logo p {
            font-size: 0.8rem;
            color: #94a3b8;
        }

        .mode-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            max-width: 240px;
        }

        .mode-btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 14px;
            color: #f8fafc;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .mode-btn:active {
            transform: scale(0.98);
            background: rgba(255, 255, 255, 0.12);
        }

        .mode-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .mode-btn:disabled:active {
            transform: none;
        }

        .mode-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mode-icon {
            width: 30px;
            height: 30px;
            border-radius: 7px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .infinite .mode-icon {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .daily .mode-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .mode-text h3 {
            font-size: 0.9rem;
            margin-bottom: 2px;
        }

        .mode-text p {
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .mode-status {
            font-size: 0.65rem;
            padding: 3px 6px;
            border-radius: 8px;
            font-weight: 500;
        }

        .status-available {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
        }

        .status-completed {
            background: rgba(148, 163, 184, 0.2);
            color: #94a3b8;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 240px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px;
            margin-top: 6px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
        }

        .stat-icon {
            width: 22px;
            height: 22px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .stat-value {
            font-size: 0.85rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.6rem;
            color: #94a3b8;
        }

        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        #gameScreen {
            padding: 8px;
            gap: 6px;
        }

        /* –•–µ–¥–µ—Ä —Å –æ—á–∫–∞–º–∏ –∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏ */
        .game-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 10px;
            flex-shrink: 0;
            height: 50px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            gap: 8px;
        }

        .back-btn {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.08);
            border: none;
            color: #f8fafc;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        .header-center {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            justify-content: center;
        }

        .header-stat {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 6px;
            min-width: 60px;
            justify-content: center;
        }

        .level-display {
            background: rgba(59, 130, 246, 0.1);
            color: #60a5fa;
        }

        .score-display {
            background: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }

        .attempts-display {
            background: rgba(255, 255, 255, 0.05);
            color: #94a3b8;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-shrink: 0;
        }

        .hint-btn-header {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            background: rgba(245, 158, 11, 0.2);
            border: none;
            color: #f59e0b;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        .reveal-btn-header {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            background: rgba(34, 197, 94, 0.2);
            border: none;
            color: #4ade80;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        /* –û–±–ª–∞—Å—Ç—å —Å–ª–æ–≤ (–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ) */
        .words-area {
            flex: 0 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 8px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 6px;
            height: 200px;
            margin-bottom: 4px;
        }

        .words-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
            flex: 1;
        }

        .word-row {
            display: flex;
            gap: 4px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .word-cell {
            display: flex;
            gap: 2px;
            padding: 4px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 6px;
            min-width: 36px;
            justify-content: center;
        }

        .letter-cell {
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: #94a3b8;
            transition: all 0.3s;
        }

        .letter-cell.revealed {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            color: #60a5fa;
        }

        .word-info {
            text-align: center;
            font-size: 0.65rem;
            color: #94a3b8;
            padding: 3px;
            margin-top: auto;
        }

        /* –û–±–ª–∞—Å—Ç—å –≤–≤–æ–¥–∞ —Å –∫—Ä—É–≥–æ–º */
        .input-area {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-height: 0;
            position: relative;
        }

        .current-input {
            display: flex;
            justify-content: center;
            gap: 5px;
            min-height: 32px;
            flex-wrap: wrap;
            flex-shrink: 0;
            margin-bottom: 5px;
        }

        .input-letter {
            width: 30px;
            height: 30px;
            background: rgba(59, 130, 246, 0.2);
            border: 2px solid rgba(59, 130, 246, 0.5);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 700;
            color: #60a5fa;
            animation: popIn 0.2s;
        }

        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* –ö—Ä—É–≥ —Å –±—É–∫–≤–∞–º–∏ */
        .circle-container {
            position: relative;
            width: 220px;
            height: 220px;
            margin: 0 auto 15px auto;
            flex-shrink: 0;
        }

        .circle-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(59, 130, 246, 0.3);
            z-index: 10;
        }

        .circle-center:active {
            transform: translate(-50%, -50%) scale(0.95);
        }

        .circle-letter {
            position: absolute;
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 5;
        }

        .circle-letter:active {
            background: rgba(59, 130, 246, 0.3);
            transform: scale(0.95);
        }

        /* –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥ –∫—Ä—É–≥–æ–º */
        .input-controls {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: auto;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }

        .control-btn {
            width: 38px;
            height: 38px;
            border-radius: 8px;
            border: none;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .clear-btn {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        .shuffle-btn {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }

        .reset-btn {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        /* –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        #resultScreen {
            justify-content: center;
            align-items: center;
            gap: 16px;
            text-align: center;
            padding: 16px;
        }

        .result-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 14px;
            padding: 20px 16px;
            width: 100%;
            max-width: 260px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-icon {
            font-size: 2.2rem;
            margin-bottom: 10px;
            color: #f59e0b;
        }

        .result-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: #60a5fa;
        }

        .result-message {
            font-size: 0.85rem;
            color: #94a3b8;
            margin-bottom: 16px;
            line-height: 1.4;
        }

        .result-stats {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.85rem;
        }

        .stat-value {
            color: #f8fafc;
            font-size: 0.95rem;
            font-weight: 600;
        }

        .result-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .action-btn {
            padding: 12px;
            border-radius: 10px;
            border: none;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .action-btn:active {
            transform: scale(0.98);
        }

        .next-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .menu-btn {
            background: rgba(255, 255, 255, 0.08);
            color: #f8fafc;
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .message-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }

        .message-overlay.active {
            display: flex;
            animation: fadeIn 0.3s;
        }

        .message-box {
            background: #1e293b;
            border-radius: 12px;
            padding: 18px;
            max-width: 260px;
            width: 100%;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .message-icon {
            font-size: 1.6rem;
            margin-bottom: 10px;
        }

        .message-text {
            font-size: 0.9rem;
            margin-bottom: 14px;
            line-height: 1.4;
        }

        .message-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 360px) {
            .words-area {
                height: 150px;
            }
            
            .circle-container {
                width: 200px;
                height: 200px;
            }
            
            .circle-center {
                width: 50px;
                height: 50px;
                font-size: 1.1rem;
            }
            
            .circle-letter {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
            
            .input-letter {
                width: 28px;
                height: 28px;
                font-size: 0.95rem;
            }
            
            .letter-cell {
                width: 18px;
                height: 18px;
                font-size: 0.75rem;
            }
            
            .control-btn {
                width: 34px;
                height: 34px;
            }
            
            .header-stat {
                font-size: 0.7rem;
                padding: 3px 6px;
                min-width: 55px;
            }
            
            .hint-btn-header,
            .reveal-btn-header {
                width: 32px;
                height: 32px;
            }
        }

        @media (min-height: 700px) and (min-width: 400px) {
            .words-area {
                height: 180px;
            }
            
            .circle-container {
                width: 240px;
                height: 240px;
            }
            
            .circle-center {
                width: 60px;
                height: 60px;
                font-size: 1.3rem;
            }
            
            .circle-letter {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .control-btn {
                width: 42px;
                height: 42px;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="mainScreen" class="screen active">
        <div class="logo">
            <h1>WORD WONDERS</h1>
            <p>–°–æ–±–∏—Ä–∞–π —Å–ª–æ–≤–∞ –∏–∑ –±—É–∫–≤</p>
        </div>
        
        <div class="mode-buttons">
            <button id="infiniteMode" class="mode-btn infinite">
                <div class="mode-content">
                    <div class="mode-icon">
                        <i class="fas fa-infinity"></i>
                    </div>
                    <div class="mode-text">
                        <h3>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∏–≥—Ä–∞</h3>
                        <p>–£—Ä–æ–≤–Ω–∏ —Å–æ —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right"></i>
            </button>
            
            <button id="dailyMode" class="mode-btn daily">
                <div class="mode-content">
                    <div class="mode-icon">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="mode-text">
                        <h3>–°–ª–æ–≤–æ –¥–Ω—è</h3>
                        <p>–ù–æ–≤–∞—è —Ç–µ–º–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å</p>
                    </div>
                </div>
                <div id="dailyStatus" class="mode-status status-available">–î–æ—Å—Ç—É–ø–Ω–æ</div>
            </button>
        </div>
        
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-icon" style="background: rgba(59, 130, 246, 0.2);">
                    <i class="fas fa-trophy" style="color: #60a5fa;"></i>
                </div>
                <div class="stat-value" id="mainLevel">1</div>
                <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-icon" style="background: rgba(245, 158, 11, 0.2);">
                    <i class="fas fa-lightbulb" style="color: #f59e0b;"></i>
                </div>
                <div class="stat-value" id="mainHints">3</div>
                <div class="stat-label">–ü–æ–¥—Å–∫–∞–∑–∫–∏</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-icon" style="background: rgba(34, 197, 94, 0.2);">
                    <i class="fas fa-eye" style="color: #4ade80;"></i>
                </div>
                <div class="stat-value" id="mainAttempts">5</div>
                <div class="stat-label">–ü–æ–ø—ã—Ç–∫–∏</div>
            </div>
        </div>
    </div>
    
    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="gameScreen" class="screen">
        <div class="game-header">
            <button id="backBtn" class="back-btn">
                <i class="fas fa-arrow-left"></i>
            </button>
            
            <div class="header-center">
                <div class="header-stat level-display">
                    <i class="fas fa-trophy"></i>
                    <span id="currentLevel">1</span>
                </div>
                
                <div class="header-stat score-display">
                    <i class="fas fa-star"></i>
                    <span id="score">0</span>
                </div>
                
                <div class="header-stat attempts-display">
                    <i class="fas fa-fire"></i>
                    <span id="remainingAttempts">0</span>/<span id="totalLetters">0</span>
                </div>
            </div>
            
            <div class="header-right">
                <button id="hintBtnHeader" class="hint-btn-header" title="–û—Ç–∫—Ä—ã—Ç—å —Å–ª–æ–≤–æ">
                    <i class="fas fa-lightbulb"></i>
                </button>
                <button id="revealBtnHeader" class="reveal-btn-header" title="–û—Ç–∫—Ä—ã—Ç—å –±—É–∫–≤—É">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
        </div>
        
        <!-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤ -->
        <div class="words-area">
            <div class="words-grid" id="wordsGrid">
                <!-- –Ø—á–µ–π–∫–∏ –±—É–∫–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
            <div class="word-info" id="wordInfo">
                –ù–∞–π–¥–∏ –≤—Å–µ —Å–ª–æ–≤–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—É–∫–≤
            </div>
        </div>
        
        <!-- –û–±–ª–∞—Å—Ç—å –≤–≤–æ–¥–∞ -->
        <div class="input-area">
            <div id="currentInput" class="current-input">
                <!-- –í–≤–µ–¥–µ–Ω–Ω—ã–µ –±—É–∫–≤—ã -->
            </div>
            
            <div class="circle-container" id="circleInput">
                <!-- –ö—Ä—É–≥ —Å –±—É–∫–≤–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ —Ü–µ–Ω—Ç—Ä–µ -->
            </div>
            
            <div class="input-controls">
                <button id="clearBtn" class="control-btn clear-btn" title="–û—á–∏—Å—Ç–∏—Ç—å">
                    <i class="fas fa-backspace"></i>
                </button>
                <button id="resetBtn" class="control-btn reset-btn" title="–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞–±—Ä–∞–Ω–Ω—ã–µ –±—É–∫–≤—ã">
                    <i class="fas fa-undo"></i>
                </button>
                <button id="shuffleBtn" class="control-btn shuffle-btn" title="–ü–µ—Ä–µ–º–µ—à–∞—Ç—å –±—É–∫–≤—ã">
                    <i class="fas fa-random"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div id="resultScreen" class="screen">
        <div class="result-content">
            <div class="result-icon" id="resultIcon">üèÜ</div>
            <div class="result-title" id="resultTitle">–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</div>
            <div class="result-message" id="resultMessage">–û—Ç–ª–∏—á–Ω–æ! –í—ã –Ω–∞—à–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞ —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è.</div>
            
            <div class="result-stats">
                <div class="stat-row">
                    <span class="stat-label">–ù–∞–π–¥–µ–Ω–æ —Å–ª–æ–≤:</span>
                    <span class="stat-value" id="resultFound">0/0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –æ—á–∫–æ–≤:</span>
                    <span class="stat-value" id="resultScore">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫:</span>
                    <span class="stat-value" id="resultAttempts">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å:</span>
                    <span class="stat-value" id="resultNextLevel">2</span>
                </div>
            </div>
            
            <div class="result-buttons">
                <button id="nextLevelBtn" class="action-btn next-btn">
                    <i class="fas fa-arrow-right"></i>
                    –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
                </button>
                <button id="backToMenuBtn" class="action-btn menu-btn">
                    <i class="fas fa-home"></i>
                    –í –º–µ–Ω—é
                </button>
            </div>
        </div>
    </div>
    
    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    <div id="messageOverlay" class="message-overlay">
        <div class="message-box">
            <div id="messageIcon" class="message-icon">‚ú®</div>
            <div id="messageText" class="message-text">–°–æ–æ–±—â–µ–Ω–∏–µ</div>
            <button id="messageOk" class="message-btn">OK</button>
        </div>
    </div>
    
    <script>
        // –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç –∏–≥—Ä—ã
        const Game = {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
            state: {
                mode: 'infinite',
                level: 1,
                score: 0,
                hints: 3,
                revealAttempts: 5,
                currentInput: [],
                foundWords: [],
                attemptsUsed: 0,
                totalLettersCount: 0,
                dailyCompleted: false,
                dailyDate: null
            },
            
            // –î–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
            levelData: null,
            
            // –û–±—â–∏–π —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤ (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å —É—á–µ—Ç–æ–º –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏)
            wordList: [
                '–ö–û–¢', '–î–û–ú', '–ú–ê–ö', '–†–û–¢', '–õ–ï–°', '–°–û–ù', '–ù–û–°', '–†–ê–ö', '–ö–û–ó–ê', '–õ–ò–°–ê',
                '–ú–û–†–ï', '–†–ï–ö–ê', '–ü–û–õ–ï', '–ì–û–†–ê', '–†–£–ö–ê', '–ù–û–ì–ê', '–ì–õ–ê–ó', '–£–•–û', '–†–û–¢', '–ù–û–°',
                '–í–û–î–ê', '–û–ì–û–ù–¨', '–í–ï–¢–ï–†', '–°–û–õ–ù–¶–ï', '–õ–£–ù–ê', '–ó–í–ï–ó–î–ê', '–ü–¢–ò–¶–ê', '–†–´–ë–ê', '–¶–í–ï–¢–û–ö', '–î–ï–†–ï–í–û',
                '–°–¢–û–õ', '–°–¢–£–õ', '–î–í–ï–†–¨', '–û–ö–ù–û', '–ö–ù–ò–ì–ê', '–†–£–ß–ö–ê', '–ë–£–ú–ê–ì–ê', '–ß–ê–°–´', '–¢–ï–õ–ï–§–û–ù', '–ö–û–ú–ü–¨–Æ–¢–ï–†'
            ],
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            init() {
                this.loadGame();
                this.setupEventListeners();
                this.updateMainScreen();
                this.setupDaily();
            },
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏–≥—Ä—ã
            loadGame() {
                const saved = localStorage.getItem('wordWondersSave');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.state = { ...this.state, ...data.state };
                    } catch (e) {
                        console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
                    }
                }
            },
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
            saveGame() {
                const saveData = {
                    state: this.state
                };
                localStorage.setItem('wordWondersSave', JSON.stringify(saveData));
            },
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∏–≥—Ä—ã
            setupDaily() {
                const today = new Date().toDateString();
                if (this.state.dailyDate !== today) {
                    this.state.dailyCompleted = false;
                    this.state.dailyDate = today;
                    this.saveGame();
                }
            },
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            setupEventListeners() {
                // –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
                document.getElementById('infiniteMode').addEventListener('click', () => {
                    console.log('–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∏–≥—Ä—ã');
                    this.startGame('infinite');
                });
                
                document.getElementById('dailyMode').addEventListener('click', () => {
                    if (!this.state.dailyCompleted) {
                        console.log('–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –°–ª–æ–≤–∞ –¥–Ω—è');
                        this.startGame('daily');
                    }
                });
                
                // –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω
                document.getElementById('backBtn').addEventListener('click', () => {
                    this.showScreen('mainScreen');
                    this.updateMainScreen();
                });
                
                document.getElementById('clearBtn').addEventListener('click', () => {
                    this.clearInput();
                });
                
                document.getElementById('resetBtn').addEventListener('click', () => {
                    this.resetInput();
                });
                
                document.getElementById('shuffleBtn').addEventListener('click', () => {
                    this.shuffleLetters();
                });
                
                document.getElementById('hintBtnHeader').addEventListener('click', () => {
                    this.useHint();
                });
                
                document.getElementById('revealBtnHeader').addEventListener('click', () => {
                    this.revealRandomLetter();
                });
                
                // –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                document.getElementById('nextLevelBtn').addEventListener('click', () => {
                    this.nextLevel();
                });
                
                document.getElementById('backToMenuBtn').addEventListener('click', () => {
                    this.showScreen('mainScreen');
                    this.updateMainScreen();
                });
                
                // –°–æ–æ–±—â–µ–Ω–∏—è
                document.getElementById('messageOk').addEventListener('click', () => {
                    this.hideMessage();
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
                document.addEventListener('keydown', (e) => {
                    if (document.getElementById('gameScreen').classList.contains('active')) {
                        if (e.key === 'Backspace') {
                            this.removeLastLetter();
                            e.preventDefault();
                        } else if (e.key === 'Enter') {
                            this.submitWord();
                            e.preventDefault();
                        } else if (e.key.length === 1 && /[–∞-—è–ê-–Øa-zA-Z]/.test(e.key)) {
                            this.addLetter(e.key.toUpperCase());
                            e.preventDefault();
                        }
                    }
                });
            },
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
            showScreen(screenId) {
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
                console.log('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω —ç–∫—Ä–∞–Ω –Ω–∞:', screenId);
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
            updateMainScreen() {
                document.getElementById('mainLevel').textContent = this.state.level;
                document.getElementById('mainHints').textContent = this.state.hints;
                document.getElementById('mainAttempts').textContent = this.state.revealAttempts;
                
                const dailyBtn = document.getElementById('dailyMode');
                const dailyStatus = document.getElementById('dailyStatus');
                
                if (this.state.dailyCompleted) {
                    dailyStatus.textContent = '–ü—Ä–æ–π–¥–µ–Ω–æ';
                    dailyStatus.className = 'mode-status status-completed';
                    dailyBtn.disabled = true;
                } else {
                    dailyStatus.textContent = '–î–æ—Å—Ç—É–ø–Ω–æ';
                    dailyStatus.className = 'mode-status status-available';
                    dailyBtn.disabled = false;
                }
            },
            
            // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
            startGame(mode) {
                console.log('–ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –≤ —Ä–µ–∂–∏–º–µ:', mode);
                
                this.state.mode = mode;
                this.state.currentInput = [];
                this.state.foundWords = [];
                this.state.attemptsUsed = 0;
                this.state.totalLettersCount = 0;
                
                if (mode === 'infinite') {
                    this.generateInfiniteLevel();
                } else {
                    this.generateDailyLevel();
                }
                
                this.updateGameScreen();
                this.showScreen('gameScreen');
                console.log('–£—Ä–æ–≤–µ–Ω—å –∑–∞–≥—Ä—É–∂–µ–Ω:', this.levelData);
            },
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
            generateInfiniteLevel() {
                console.log('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è', this.state.level);
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Ä–æ–≤–Ω—è
                const difficulty = Math.min(2 + Math.floor(this.state.level / 3), 5); // –æ—Ç 2 –¥–æ 5 —Å–ª–æ–≤
                const wordCount = difficulty;
                
                // –û—Ç–±–∏—Ä–∞–µ–º —Å–ª–æ–≤–∞ –∏ –±—É–∫–≤—ã —Å —É—á–µ—Ç–æ–º –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏
                let selectedWords = [];
                let availableLetters = [];
                let allLetters = [];
                
                // –ù–∞—á–∏–Ω–∞–µ–º —Å –æ–¥–Ω–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–ª–æ–≤–∞
                const startWordIndex = Math.floor(Math.random() * this.wordList.length);
                const startWord = this.wordList[startWordIndex];
                selectedWords.push(startWord);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –±—É–∫–≤—ã –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–æ–≤–∞ —Å —É—á–µ—Ç–æ–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
                const startWordLetters = startWord.split('');
                allLetters.push(...startWordLetters);
                availableLetters = [...new Set(startWordLetters)];
                
                // –ü—ã—Ç–∞–µ–º—Å—è –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—É–∫–≤
                const availableWords = this.wordList.filter(word => {
                    if (selectedWords.includes(word)) return false;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ –∏–∑ —Ç–µ–∫—É—â–∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—É–∫–≤
                    const wordLetters = word.split('');
                    const letterCounts = {};
                    
                    // –°—á–∏—Ç–∞–µ–º –±—É–∫–≤—ã –≤ —Å–ª–æ–≤–µ
                    wordLetters.forEach(letter => {
                        letterCounts[letter] = (letterCounts[letter] || 0) + 1;
                    });
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±—É–∫–≤—ã –≤ availableLetters
                    for (const letter in letterCounts) {
                        const availableCount = allLetters.filter(l => l === letter).length;
                        if (letterCounts[letter] > availableCount) {
                            return false;
                        }
                    }
                    
                    return true;
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ)
                for (let i = 1; i < wordCount && availableWords.length > 0; i++) {
                    const randomIndex = Math.floor(Math.random() * availableWords.length);
                    const word = availableWords[randomIndex];
                    
                    selectedWords.push(word);
                    allLetters.push(...word.split(''));
                    availableLetters = [...new Set(allLetters)];
                    
                    // –£–¥–∞–ª—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
                    availableWords.splice(randomIndex, 1);
                }
                
                // –ï—Å–ª–∏ —Å–ª–æ–≤ –º–µ–Ω—å—à–µ –Ω—É–∂–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, –¥–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ–≤–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –±—É–∫–≤
                while (selectedWords.length < wordCount) {
                    // –ù–∞—Ö–æ–¥–∏–º —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–æ–≤—ã—Ö –±—É–∫–≤
                    let bestWord = null;
                    let bestNewLetters = Infinity;
                    
                    this.wordList.forEach(word => {
                        if (selectedWords.includes(word)) return;
                        
                        const wordLetters = word.split('');
                        const newLetters = wordLetters.filter(letter => 
                            !allLetters.includes(letter)
                        ).length;
                        
                        if (newLetters < bestNewLetters && newLetters <= 2) {
                            bestNewLetters = newLetters;
                            bestWord = word;
                        }
                    });
                    
                    if (bestWord) {
                        selectedWords.push(bestWord);
                        allLetters.push(...bestWord.split(''));
                        availableLetters = [...new Set(allLetters)];
                    } else {
                        // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ —Å–ª–æ–≤–æ, –¥–æ–±–∞–≤–ª—è–µ–º –ª—é–±–æ–µ
                        const remainingWords = this.wordList.filter(word => !selectedWords.includes(word));
                        if (remainingWords.length > 0) {
                            const randomWord = remainingWords[Math.floor(Math.random() * remainingWords.length)];
                            selectedWords.push(randomWord);
                            allLetters.push(...randomWord.split(''));
                            availableLetters = [...new Set(allLetters)];
                        } else {
                            break;
                        }
                    }
                }
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É–∫–≤ –≤ –∫—Ä—É–≥–µ –¥–æ 10
                if (availableLetters.length > 10) {
                    // –í—ã–±–∏—Ä–∞–µ–º 10 —Å–∞–º—ã—Ö —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±—É–∫–≤
                    const letterFrequency = {};
                    allLetters.forEach(letter => {
                        letterFrequency[letter] = (letterFrequency[letter] || 0) + 1;
                    });
                    
                    availableLetters = Object.keys(letterFrequency)
                        .sort((a, b) => letterFrequency[b] - letterFrequency[a])
                        .slice(0, 10);
                }
                
                // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –±—É–∫–≤—ã
                for (let i = availableLetters.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [availableLetters[i], availableLetters[j]] = [availableLetters[j], availableLetters[i]];
                }
                
                // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É–∫–≤ (—Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏)
                this.state.totalLettersCount = allLetters.length;
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —è—á–µ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
                const wordCells = {};
                selectedWords.forEach(word => {
                    wordCells[word] = word.split('').map((letter, index) => ({
                        revealed: false,
                        letter: letter,
                        index: index
                    }));
                });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è
                this.levelData = {
                    availableLetters: availableLetters,
                    targetWords: selectedWords,
                    wordCells: wordCells,
                    allLetters: allLetters,
                    maxAttempts: Math.max(this.state.totalLettersCount * 2, 15) // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ–ø—ã—Ç–∫–∏
                };
                
                console.log('–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞:', selectedWords);
                console.log('–ë—É–∫–≤—ã –¥–ª—è –∫—Ä—É–≥–∞:', availableLetters);
                console.log('–í—Å–µ –±—É–∫–≤—ã (—Å –ø–æ–≤—Ç–æ—Ä–∞–º–∏):', allLetters);
            },
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
            generateDailyLevel() {
                console.log('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è');
                
                const dailyThemes = [
                    { 
                        name: '–ñ–∏–≤–æ—Ç–Ω—ã–µ', 
                        words: ['–ö–û–¢', '–°–û–ë–ê–ö–ê', '–õ–ï–í', '–°–õ–û–ù', '–¢–ò–ì–†'],
                        letters: ['–ö', '–û', '–¢', '–°', '–ë', '–ê', '–õ', '–ï', '–í', '–ù', '–ò', '–ì', '–†']
                    },
                    { 
                        name: '–ì–æ—Ä–æ–¥–∞', 
                        words: ['–ú–û–°–ö–í–ê', '–ü–ê–†–ò–ñ', '–õ–û–ù–î–û–ù', '–¢–û–ö–ò–û', '–ë–ï–†–õ–ò–ù'],
                        letters: ['–ú', '–û', '–°', '–ö', '–í', '–ê', '–ü', '–†', '–ò', '–ñ', '–õ', '–ù', '–î', '–¢', '–ë', '–ï']
                    },
                    { 
                        name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏', 
                        words: ['–í–†–ê–ß', '–£–ß–ò–¢–ï–õ–¨', '–ü–û–í–ê–†', '–ò–ù–ñ–ï–ù–ï–†', '–ü–†–û–ì–†–ê–ú–ú–ò–°–¢'],
                        letters: ['–í', '–†', '–ê', '–ß', '–£', '–ò', '–¢', '–ï', '–õ', '–¨', '–ü', '–û', '–ù', '–ñ', '–ì', '–ú', '–°']
                    },
                    { 
                        name: '–ï–¥–∞', 
                        words: ['–Ø–ë–õ–û–ö–û', '–•–õ–ï–ë', '–°–£–ü', '–°–ê–õ–ê–¢', '–¢–û–†–¢'],
                        letters: ['–Ø', '–ë', '–õ', '–û', '–ö', '–•', '–ï', '–°', '–£', '–ü', '–ê', '–¢', '–†']
                    }
                ];
                
                const today = new Date().getDate();
                const themeIndex = today % dailyThemes.length;
                const theme = dailyThemes[themeIndex];
                
                // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –±—É–∫–≤—ã (—Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏)
                const allLetters = [];
                theme.words.forEach(word => {
                    allLetters.push(...word.split(''));
                });
                
                // –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –±—É–∫–≤—ã –¥–ª—è –∫—Ä—É–≥–∞ (–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 10)
                let availableLetters = theme.letters.slice(0, 10);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ —Å–ª–æ–≤–∞ –º–æ–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –∏–∑ availableLetters
                theme.words.forEach(word => {
                    const wordLetters = word.split('');
                    const letterCounts = {};
                    
                    wordLetters.forEach(letter => {
                        letterCounts[letter] = (letterCounts[letter] || 0) + 1;
                    });
                    
                    // –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –±—É–∫–≤—ã –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –µ—ë
                    for (const letter in letterCounts) {
                        const availableCount = availableLetters.filter(l => l === letter).length;
                        const neededCount = letterCounts[letter];
                        
                        if (availableCount < neededCount) {
                            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ø–∏–∏ –±—É–∫–≤—ã
                            for (let i = availableCount; i < neededCount && availableLetters.length < 10; i++) {
                                availableLetters.push(letter);
                            }
                        }
                    }
                });
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —è—á–µ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
                const wordCells = {};
                theme.words.forEach(word => {
                    wordCells[word] = word.split('').map((letter, index) => ({
                        revealed: false,
                        letter: letter,
                        index: index
                    }));
                });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                this.state.totalLettersCount = allLetters.length;
                this.levelData = {
                    availableLetters: availableLetters,
                    targetWords: theme.words,
                    wordCells: wordCells,
                    allLetters: allLetters,
                    maxAttempts: Math.max(this.state.totalLettersCount * 2, 20)
                };
                
                console.log('–¢–µ–º–∞ –¥–Ω—è:', theme.name);
                console.log('–°–ª–æ–≤–∞:', theme.words);
                console.log('–ë—É–∫–≤—ã –¥–ª—è –∫—Ä—É–≥–∞:', availableLetters);
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
            updateGameScreen() {
                console.log('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è
                if (!this.levelData) {
                    console.error('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è!');
                    this.showMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Ä–æ–≤–Ω—è', '‚ùå');
                    this.showScreen('mainScreen');
                    return;
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ö–µ–¥–µ—Ä–µ
                document.getElementById('currentLevel').textContent = this.state.level;
                document.getElementById('score').textContent = this.state.score;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫
                const remainingAttempts = this.levelData.maxAttempts - this.state.attemptsUsed;
                document.getElementById('remainingAttempts').textContent = remainingAttempts;
                document.getElementById('totalLetters').textContent = this.levelData.maxAttempts;
                
                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
                this.renderWordsGrid();
                
                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–≤–æ–¥–∞
                this.renderCurrentInput();
                
                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—Ä—É–≥–∞ —Å –±—É–∫–≤–∞–º–∏
                this.renderCircleInput();
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                const foundCount = this.state.foundWords.length;
                const totalWords = this.levelData.targetWords.length;
                document.getElementById('wordInfo').textContent = 
                    `–ù–∞–π–¥–µ–Ω–æ —Å–ª–æ–≤: ${foundCount}/${totalWords}`;
            },
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ —Å–ª–æ–≤
            renderWordsGrid() {
                const container = document.getElementById('wordsGrid');
                container.innerHTML = '';
                
                if (!this.levelData || !this.levelData.targetWords) {
                    console.error('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª–æ–≤');
                    return;
                }
                
                this.levelData.targetWords.forEach(word => {
                    const wordRow = document.createElement('div');
                    wordRow.className = 'word-row';
                    
                    const isFound = this.state.foundWords.includes(word);
                    
                    this.levelData.wordCells[word].forEach((cell, index) => {
                        const cellElement = document.createElement('div');
                        cellElement.className = 'letter-cell';
                        
                        if (isFound || cell.revealed) {
                            cellElement.textContent = cell.letter;
                            cellElement.classList.add('revealed');
                        }
                        
                        wordRow.appendChild(cellElement);
                    });
                    
                    container.appendChild(wordRow);
                });
            },
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–≤–æ–¥–∞
            renderCurrentInput() {
                const container = document.getElementById('currentInput');
                container.innerHTML = '';
                
                this.state.currentInput.forEach(letter => {
                    const div = document.createElement('div');
                    div.className = 'input-letter';
                    div.textContent = letter;
                    container.appendChild(div);
                });
            },
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—Ä—É–≥–∞ —Å –±—É–∫–≤–∞–º–∏
            renderCircleInput() {
                const container = document.getElementById('circleInput');
                container.innerHTML = '';
                
                if (!this.levelData || !this.levelData.availableLetters) {
                    console.error('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—Ä—É–≥–∞');
                    return;
                }
                
                // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                const center = document.createElement('div');
                center.className = 'circle-center';
                center.innerHTML = '<i class="fas fa-check"></i>';
                center.title = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–æ–≤–æ';
                center.onclick = () => this.submitWord();
                container.appendChild(center);
                
                // –ë—É–∫–≤—ã –ø–æ –∫—Ä—É–≥—É
                const letters = this.levelData.availableLetters;
                const radius = 75;
                const centerX = 110;
                const centerY = 110;
                
                letters.forEach((letter, index) => {
                    const angle = (index / letters.length) * 2 * Math.PI;
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    
                    const btn = document.createElement('div');
                    btn.className = 'circle-letter';
                    btn.textContent = letter;
                    btn.style.left = `${x - 18}px`;
                    btn.style.top = `${y - 18}px`;
                    btn.onclick = () => this.addLetter(letter);
                    btn.title = `–ù–∞–±—Ä–∞—Ç—å –±—É–∫–≤—É ${letter}`;
                    
                    container.appendChild(btn);
                });
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±—É–∫–≤—ã
            addLetter(letter) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –±—É–∫–≤—É
                const usedCount = this.state.currentInput.filter(l => l === letter).length;
                const availableCount = this.levelData.allLetters.filter(l => l === letter).length;
                
                if (usedCount < availableCount) {
                    this.state.currentInput.push(letter);
                    this.updateGameScreen();
                } else {
                    this.showMessage(`–ë—É–∫–≤–∞ "${letter}" —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑!`, '‚ö†Ô∏è');
                }
            },
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –±—É–∫–≤—ã
            removeLastLetter() {
                if (this.state.currentInput.length > 0) {
                    this.state.currentInput.pop();
                    this.updateGameScreen();
                }
            },
            
            // –û—á–∏—Å—Ç–∫–∞ –≤–≤–æ–¥–∞
            clearInput() {
                this.state.currentInput = [];
                this.updateGameScreen();
            },
            
            // –°–±—Ä–æ—Å –Ω–∞–±—Ä–∞–Ω–Ω—ã—Ö –±—É–∫–≤
            resetInput() {
                this.clearInput();
                this.showMessage('–í—Å–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã–µ –±—É–∫–≤—ã —Å–±—Ä–æ—à–µ–Ω—ã', 'üîÑ');
            },
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –±—É–∫–≤ –≤ –∫—Ä—É–≥–µ
            shuffleLetters() {
                if (!this.levelData || !this.levelData.availableLetters) return;
                
                const letters = this.levelData.availableLetters;
                for (let i = letters.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [letters[i], letters[j]] = [letters[j], letters[i]];
                }
                this.updateGameScreen();
                this.showMessage('–ë—É–∫–≤—ã –ø–µ—Ä–µ–º–µ—à–∞–Ω—ã!', 'üîÄ');
            },
            
            // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
            useHint() {
                if (this.state.hints > 0) {
                    const unrevealedWords = this.levelData.targetWords.filter(word => 
                        !this.state.foundWords.includes(word)
                    );
                    
                    if (unrevealedWords.length > 0) {
                        const randomWord = unrevealedWords[Math.floor(Math.random() * unrevealedWords.length)];
                        
                        this.state.foundWords.push(randomWord);
                        this.state.hints--;
                        
                        const points = Math.floor(randomWord.length * 5);
                        this.state.score += points;
                        
                        this.updateGameScreen();
                        this.showMessage(`–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–ª–æ–≤–æ "${randomWord}" –æ—Ç–∫—Ä—ã—Ç–æ! +${points} –æ—á–∫–æ–≤`, 'üí°');
                        
                        this.checkLevelCompletion();
                    } else {
                        this.showMessage('–í—Å–µ —Å–ª–æ–≤–∞ —É–∂–µ –Ω–∞–π–¥–µ–Ω—ã!', '‚úÖ');
                    }
                } else {
                    this.showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥—Å–∫–∞–∑–æ–∫!', '‚ö†Ô∏è');
                }
            },
            
            // –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π –±—É–∫–≤—ã
            revealRandomLetter() {
                if (this.state.revealAttempts > 0) {
                    const hiddenCells = [];
                    
                    this.levelData.targetWords.forEach(word => {
                        if (!this.state.foundWords.includes(word)) {
                            this.levelData.wordCells[word].forEach((cell, index) => {
                                if (!cell.revealed) {
                                    hiddenCells.push({ word, cell, index });
                                }
                            });
                        }
                    });
                    
                    if (hiddenCells.length > 0) {
                        const randomCell = hiddenCells[Math.floor(Math.random() * hiddenCells.length)];
                        
                        this.levelData.wordCells[randomCell.word][randomCell.index].revealed = true;
                        this.state.revealAttempts--;
                        
                        this.updateGameScreen();
                        this.showMessage(`–û—Ç–∫—Ä—ã—Ç–∞ –±—É–∫–≤–∞ "${randomCell.cell.letter}"`, 'üëÅÔ∏è');
                        
                        this.checkWordCompletion(randomCell.word);
                    } else {
                        this.showMessage('–í—Å–µ –±—É–∫–≤—ã —É–∂–µ –æ—Ç–∫—Ä—ã—Ç—ã!', '‚úÖ');
                    }
                } else {
                    this.showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ø—ã—Ç–æ–∫!', '‚ö†Ô∏è');
                }
            },
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –±–æ–Ω—É—Å–Ω—ã–µ –±—É–∫–≤—ã
            checkWordCompletion(word) {
                const allRevealed = this.levelData.wordCells[word].every(cell => cell.revealed);
                if (allRevealed && !this.state.foundWords.includes(word)) {
                    this.state.foundWords.push(word);
                    const points = word.length * 10;
                    this.state.score += points;
                    
                    this.showMessage(`–°–ª–æ–≤–æ "${word}" –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç–æ! +${points} –æ—á–∫–æ–≤`, '‚ú®');
                    this.checkLevelCompletion();
                }
            },
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–≤–∞
            submitWord() {
                const word = this.state.currentInput.join('').toUpperCase();
                
                if (word.length < 2) {
                    this.showMessage('–°–ª–æ–≤–æ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 –±—É–∫–≤—ã!', '‚ö†Ô∏è');
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—É–∫–≤
                const letterCounts = {};
                this.state.currentInput.forEach(letter => {
                    letterCounts[letter] = (letterCounts[letter] || 0) + 1;
                });
                
                const availableCounts = {};
                this.levelData.allLetters.forEach(letter => {
                    availableCounts[letter] = (availableCounts[letter] || 0) + 1;
                });
                
                let isValid = true;
                for (const letter in letterCounts) {
                    if (!availableCounts[letter] || availableCounts[letter] < letterCounts[letter]) {
                        isValid = false;
                        break;
                    }
                }
                
                if (!isValid) {
                    this.state.attemptsUsed++;
                    this.showMessage('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—É–∫–≤—ã!', '‚ùå');
                    
                    if (this.state.attemptsUsed >= this.levelData.maxAttempts) {
                        setTimeout(() => {
                            this.showLevelFailed();
                        }, 1000);
                    }
                    
                    this.clearInput();
                    this.updateGameScreen();
                    this.saveGame();
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ª–æ–≤–æ
                if (this.levelData.targetWords.includes(word)) {
                    if (!this.state.foundWords.includes(word)) {
                        this.state.foundWords.push(word);
                        const points = word.length * 10;
                        this.state.score += points;
                        this.state.attemptsUsed++;
                        
                        this.showMessage(`–ü—Ä–∞–≤–∏–ª—å–Ω–æ! "${word}" –Ω–∞–π–¥–µ–Ω–æ! +${points} –æ—á–∫–æ–≤`, '‚úÖ');
                        this.checkLevelCompletion();
                        
                    } else {
                        this.state.attemptsUsed++;
                        this.showMessage('–≠—Ç–æ —Å–ª–æ–≤–æ —É–∂–µ –Ω–∞–π–¥–µ–Ω–æ!', '‚ö†Ô∏è');
                    }
                } else {
                    this.state.attemptsUsed++;
                    this.showMessage('–¢–∞–∫–æ–≥–æ —Å–ª–æ–≤–∞ –Ω–µ—Ç –≤ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ!', '‚ùå');
                    
                    if (this.state.attemptsUsed >= this.levelData.maxAttempts) {
                        setTimeout(() => {
                            this.showLevelFailed();
                        }, 1000);
                    }
                }
                
                this.clearInput();
                this.saveGame();
            },
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
            checkLevelCompletion() {
                const allFound = this.levelData.targetWords.every(word => 
                    this.state.foundWords.includes(word)
                );
                
                if (allFound) {
                    setTimeout(() => {
                        this.showLevelComplete();
                    }, 1000);
                }
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
            showLevelComplete() {
                document.getElementById('resultFound').textContent = 
                    `${this.state.foundWords.length}/${this.levelData.targetWords.length}`;
                document.getElementById('resultScore').textContent = this.state.score;
                document.getElementById('resultAttempts').textContent = 
                    this.levelData.maxAttempts - this.state.attemptsUsed;
                document.getElementById('resultNextLevel').textContent = this.state.level + 1;
                
                document.getElementById('resultIcon').textContent = 'üèÜ';
                document.getElementById('resultTitle').textContent = '–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!';
                document.getElementById('resultMessage').textContent = 
                    `–û—Ç–ª–∏—á–Ω–æ! –í—ã –Ω–∞—à–ª–∏ –≤—Å–µ ${this.levelData.targetWords.length} —Å–ª–æ–≤.`;
                
                document.getElementById('nextLevelBtn').style.display = 'flex';
                this.showScreen('resultScreen');
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –ø—Ä–æ–≤–∞–ª–∞ —É—Ä–æ–≤–Ω—è
            showLevelFailed() {
                document.getElementById('resultFound').textContent = 
                    `${this.state.foundWords.length}/${this.levelData.targetWords.length}`;
                document.getElementById('resultScore').textContent = this.state.score;
                document.getElementById('resultAttempts').textContent = 0;
                document.getElementById('resultNextLevel').textContent = this.state.level;
                
                document.getElementById('resultIcon').textContent = 'üòî';
                document.getElementById('resultTitle').textContent = '–£—Ä–æ–≤–µ–Ω—å –Ω–µ –ø—Ä–æ–π–¥–µ–Ω';
                document.getElementById('resultMessage').textContent = 
                    `–ü–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!`;
                
                document.getElementById('nextLevelBtn').style.display = 'none';
                this.showScreen('resultScreen');
            },
            
            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
            nextLevel() {
                if (this.state.mode === 'infinite') {
                    this.state.level++;
                    this.state.hints++;
                    this.state.revealAttempts += 2;
                    this.saveGame();
                    this.startGame('infinite');
                } else {
                    this.state.dailyCompleted = true;
                    this.saveGame();
                    this.showScreen('mainScreen');
                    this.updateMainScreen();
                }
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            showMessage(text, icon = '‚ú®') {
                document.getElementById('messageIcon').textContent = icon;
                document.getElementById('messageText').textContent = text;
                document.getElementById('messageOverlay').classList.add('active');
                
                setTimeout(() => {
                    if (document.getElementById('messageOverlay').classList.contains('active')) {
                        this.hideMessage();
                    }
                }, 2000);
            },
            
            // –°–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            hideMessage() {
                document.getElementById('messageOverlay').classList.remove('active');
            }
        };
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('–î–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...');
            Game.init();
            console.log('–ò–≥—Ä–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        });
    </script>
       
</body>
</html>
